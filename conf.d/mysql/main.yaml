global:
  scrape_interval: 10s
  external_labels:
    monitor: 'mysql'

scrape_configs:
# - job_name: 'mysql_prod'
#   scrape_interval: 5s
#   scrape_rule_files:
#   - 'rules.d/common.toml'
#   - 'rules.d/schema.toml'
#   static_configs:
#   - targets:
#     - 'a.%{LANG}.com:3306'
#     - 'b.%{LANG}.com:3306'
#     labels:
#       name: 'ulricqin'
#       city: 'beijing'
#   - targets:
#     - 'c.com:3306'
#     - 'd.com:3306'
#     labels:
#       name: 'ulricqin2'
#       city: 'beijing2'
#       lang: '%{LANG}'

# - job_name: 'mysql_test'
#   http_sd_configs:
#   - url: http://localhost:8080/get-targets
#   scrape_rule_files:
#   - 'rules.d/common.toml'

- job_name: 'mysql_abcd'
  relabel_configs:
  - source_labels: [__address__]
    regex: '(.*)'
    target_label: xxx
    replacement: '${1}'
  - source_labels: [__address__]
    regex: '(.*)'
    target_label: yyy
    replacement: '${1}'
  file_sd_configs:
  - files:
    - 'inst.yaml'
  scrape_rule_files:
  - 'rule_head.toml'
  - 'rule_lock.toml'
  - 'rule_cust.toml'